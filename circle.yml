machine:
  python:
    version: 3.6.0
  environment:
    LLVM_CONFIG: /usr/lib/llvm-3.8/bin/llvm-config

dependencies:
  pre:
    - sudo apt-get install libhdf5-dev;
    - sudo apt-get install llvm-3.8;
  post:
    - pip install -e .

test:
  pre:
    - python mnist/download_mnist.py
  override:
    # tests
    - pytest test/test.py
    - pytest test/test_rbm.py

    # check that examples run to completion 
    # - python3 examples/example_mnist_grbm.py # segfaults
    - python3 examples/example_mnist_hopfield.py
    - python3 examples/example_mnist_ising.py
    - python3 examples/example_mnist_rbm.py
    - python3 examples/example_mnist_rbm_sklearn.py

